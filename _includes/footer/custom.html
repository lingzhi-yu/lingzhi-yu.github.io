<!-- start custom footer snippets -->

<!-- Support for MathJax -->
<script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
<script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script>

<!-- Support for Plotly -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/3.0.1/plotly.min.js"></script>

<!-- Support for Mermaid -->
<script type="module">
  import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs";
  mermaid.initialize({ startOnLoad: true, theme: "default" });
  await mermaid.run({ querySelector: "code.language-mermaid" });
</script>

<!-- end custom footer snippets -->

<!-- Force light mode + hide toggle -->
<script>
  (function () {
    try {
      localStorage.setItem("theme", "light");
      localStorage.setItem("mmColorScheme", "light");
      document.documentElement.setAttribute("data-theme", "light");

      var toggles = document.querySelectorAll(
        "#theme-toggle,.theme-toggle,.dark-mode-toggle,.mode-toggle,.js-theme-toggle"
      );
      toggles.forEach(function (el) { el.style.display = "none"; });
    } catch (e) {}
  })();
</script>

<!-- Open publication titles in a NEW TAB (robust: intercept click) -->
<script>
  (function () {
    // 1) Set attributes if present at load
    function setAttrs() {
      document.querySelectorAll(".pubs-section .archive__item-title a").forEach(function (a) {
        a.setAttribute("target", "_blank");
        a.setAttribute("rel", "noopener");
      });
    }

    // 2) Intercept clicks as a fallback (works even if target gets overridden)
    function handleClick(e) {
      var link = e.target && e.target.closest(".pubs-section .archive__item-title a");
      if (!link) return;
      e.preventDefault();
      // open in a new tab reliably
      window.open(link.href, "_blank", "noopener");
    }

    document.addEventListener("DOMContentLoaded", setAttrs);
    document.addEventListener("click", handleClick, false);
  })();
</script>
